<?xml version="1.0" encoding="utf-8"?>
<sql>  
    <statement name="Clientes">
        SELECT 
        tbCliente._id AS _id,
        tbCliente.Genero,
        tbCliente.EstadoCivil,
        tbCliente.FechaNacimiento,
        tbCliente.IdTipoCliente,
        tbCliente.IdCanal,
        tbCliente.Calificacion,
        tbClienteExt.Nombre1 AS tbClienteExt_Nombre1,
        tbClienteExt.Nombre2 AS tbClienteExt_Nombre2,
       	tbClienteExt.Apellido1 AS tbClienteExt_Apellido1,
       	tbClienteExt.Apellido2 AS tbClienteExt_Apellido2,
       	tbClienteExt.NombreCompleto AS tbClienteExt_NombreCompleto,
       	tbClienteExt.Identificacion AS tbClienteExt_Identificacion,
       	tbClienteExt.CorreoElectronico AS tbClienteExt_CorreoElectronico,
       	tbClienteExt.Direccion AS tbClienteExt_Direccion,
       	tbClienteExt.Telefono1 AS tbClienteExt_Telefono1,
       	tbEstadoCivil.Value AS tbEstadoCivil_Value,
       	tbGenero.Value AS tbGenero_Value,
       	tbTipoCliente.Descripcion AS tbTipoCliente_Descripcion,
       	tbCanal.Descripcion AS tbCanal_Descripcion
        FROM tbCliente
    	JOIN tbClienteExt
    	ON tbCliente._id = tbCliente.docid
    	JOIN tbTipoCliente
    	ON tbTipoCliente._id = tbCliente.IdTipoCliente
    	JOIN tbCanal
    	ON tbCanal._id = tbCliente.IdCanal
    	JOIN tbGeneralValue tbEstadoCivil
    	ON tbEstadoCivil.GeneralTableId = 1002
    	AND tbEstadoCivil.Code = tbCliente.EstadoCivil
    	JOIN tbGeneralValue tbGenero
    	ON tbGenero.GeneralTableId = 1003
    	AND tbGenero.Code = tbCliente.Genero    	
    </statement>
    <statement name="ClienteById">
        SELECT 
        tbCliente._id AS _id,
        tbCliente.Genero,
        tbCliente.EstadoCivil,
        tbCliente.FechaNacimiento,
        tbCliente.IdTipoCliente,
        tbCliente.IdCanal,
        tbCliente.Calificacion,
        tbClienteExt.Nombre1 AS tbClienteExt_Nombre1,
        tbClienteExt.Nombre2 AS tbClienteExt_Nombre2,
       	tbClienteExt.Apellido1 AS tbClienteExt_Apellido1,
       	tbClienteExt.Apellido2 AS tbClienteExt_Apellido2,
       	tbClienteExt.NombreCompleto AS tbClienteExt_NombreCompleto,
       	tbClienteExt.Identificacion AS tbClienteExt_Identificacion,
       	tbClienteExt.CorreoElectronico AS tbClienteExt_CorreoElectronico,
       	tbClienteExt.Direccion AS tbClienteExt_Direccion,
       	tbClienteExt.Telefono1 AS tbClienteExt_Telefono1,
       	tbEstadoCivil.Value AS tbEstadoCivil_Value,
       	tbGenero.Value AS tbGenero_Value,
       	tbTipoCliente.Descripcion AS tbTipoCliente_Descripcion,
       	tbCanal.Descripcion AS tbCanal_Descripcion
        FROM tbCliente
    	JOIN tbClienteExt
    	ON tbCliente._id = tbCliente.docid
    	JOIN tbTipoCliente
    	ON tbTipoCliente._id = tbCliente.IdTipoCliente
    	JOIN tbCanal
    	ON tbCanal._id = tbCliente.IdCanal
    	JOIN tbGeneralValue tbEstadoCivil
    	ON tbEstadoCivil.GeneralTableId = 1002
    	AND tbEstadoCivil.Code = tbCliente.EstadoCivil
    	JOIN tbGeneralValue tbGenero
    	ON tbGenero.GeneralTableId = 1003
    	AND tbGenero.Code = tbCliente.Genero
    	WHERE tbCliente._id = ?
    </statement>
	 <statement name="SimpleClientSearch">
        SELECT 
        tbCliente._id AS _id,
        tbClienteExt.Nombre1,
       	tbClienteExt.Apellido1 ,
       	tbClienteExt.Identificacion ,
       	tbClienteExt.CorreoElectronico,
       	tbClienteExt.FecIng,
       	tbClienteExt.Direccion,
       	tbClienteExt.Telefono1
       	FROM tbClienteExt       	 
       	INNER JOIN tbCliente 
       	ON tbCliente._id = tbClienteExt.docid
       	INNER JOIN ( 
       	
       		SELECT 
        		tbClienteExt.docid,
        		matchinfo( tbClienteExt ) AS Rank
        		FROM tbClienteExt
        		WHERE tbClienteExt MATCH ?
        		ORDER BY rank DESC LIMIT 30 OFFSET 0
       		
       	 ) AS tbClientSearch
       	ON tbClienteExt.docid = tbClientSearch.docid       	
        ORDER BY tbClientSearch.Rank DESC   	
    </statement>    
    
	 
	  <statement name="AgendaByCliente">
       SELECT  
        tbAgenda._id, 
        tbAgenda.FechaInicio,
        tbAgenda.FechaFin,
        tbAgenda.EstadoAgenda,
        tbAgendaExt.NombreCompleto AS tbAgendaExt_NombreCompleto,
        tbAgendaExt.Direccion AS tbAgendaExt_Direccion,
        tbAgendaExt.Ciudad AS tbAgendaExt_Ciudad
        FROM tbAgenda
        JOIN tbAgendaExt
        ON tbAgenda._id = tbAgendaExt.docid
        ORDER BY tbAgenda.FechaInicio, tbCliente.NombreCompleto
     </statement>
     
	  
	  <statement name="AgendaByAgendaID">
       SELECT  
        tbAgenda._id,
        tbAgenda.IdCliente, 
        tbAgenda.FechaInicio,
        tbAgenda.FechaFin,
        tbAgenda.EstadoAgenda,
        tbCliente.NombreCompleto AS tbCliente_NombreCompleto,
        tbCliente.CorreoElectronico AS tbCliente_CorreoElectronico,
        tbClienteDireccion.Direccion AS tbClienteDireccion_Direccion,
        tbClienteDireccion.Telefono1 AS tbClienteDireccion_Telefono1
        FROM tbAgenda
        JOIN tbCliente        
        ON tbAgenda.IdCliente = tbCliente._id         
        JOIN tbClienteDireccion        
        ON tbAgenda.IdCliente = tbClienteDireccion.IdCliente
        AND tbAgenda.IdClienteDireccion = tbClienteDireccion.IdClienteDireccion 
        WHERE tbAgenda._id = ?
     </statement>
	  
	 <statement name="SimpleRutaSearch">
        SELECT 
        tbAgenda._id AS tbAgenda__id,
        tbAgendaExt.NombreCompleto,
        tbAgendaExt.Direccion,
        tbAgenda.EstadoAgenda AS tbAgenda_EstadoAgenda,
        tbAgenda.FechaInicio AS tbAgenda_FechaInicio,
        tbAgenda.FechaFin AS tbAgenda_FechaFin
       	FROM tbAgendaExt       	 
       	INNER JOIN tbAgenda 
       	ON tbAgenda._id = tbAgendaExt.docid 
       	INNER JOIN ( 
       	
       		SELECT 
        		tbAgendaExt.docid,
        		matchinfo( tbAgendaExt ) AS Rank
        		FROM tbAgendaExt
        		WHERE tbAgendaExt MATCH ?
        		ORDER BY rank DESC LIMIT 30 OFFSET 0
       		
       	 ) AS tbRutaSearch
       	ON tbAgendaExt.docid = tbRutaSearch.docid       	
        ORDER BY tbRutaSearch.Rank DESC   	
    </statement>    
</sql>